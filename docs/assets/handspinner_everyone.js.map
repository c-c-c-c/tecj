{"version":3,"sources":["../../src/script/handspinner_everyone.js"],"names":["WIDTH","HEIGHT","c_radian","r_radian","lightOn","lightOff","hsGeoGroupOn","THREE","Group","hsGeoGroupOff","globalHsGroupOff","model_hs","model_pn","mesh","controls","plane","vp","v_phase","colorConf","renderer","WebGLRenderer","preserveDrawingBuffer","setSize","document","getElementById","appendChild","domElement","sceneOn","Scene","sceneOff","camera","PerspectiveCamera","DirectionalLight","position","set","add","scene_bg","camera_bg","OrthographicCamera","loader","JSONLoader","modelPath","termsTree1","term1","ledNo","oftenBunbo","oftenBunshi","ledColor","term2","term3","term4","term5","termsTree2","termsTree3","initRender","load","geo","mat","hsGroupOn","hsGroupOff","hs_num","geometry","material","scale_hs","BasicMat","MeshBasicMaterial","PhongMat","MeshPhongMaterial","color","Color","wireframe","Mesh","scale","randColor","Math","random","opacity","transparent","p_geometry","PlaneGeometry","y","randColorConf","shamFrame","planeGroup","keyNo","termsTree","tmpTerm","p_material","rotation","x","PI","z","visible","tmp_colored_led","lookAt","OrbitControls","main","count","render_count","count_three","update","autoClearColor","sin","render","requestAnimationFrame","initVueTerm","Vue","component","template","props","methods","deleteTerm","console","log","index","$emit","vm","el","data","terms","id","content","addTerm","term_id","push","deleteTermEmit","splice","initVuePhase","changePhase","nextPhase","initAnimation","className","setTimeout","initColorPicker","picker_cnt","makeColorPicker","num","picker_id","$","spectrum","showPaletteOnly","palette","ready"],"mappings":"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","file":"handspinner_everyone.js","sourcesContent":["var WIDTH = 800;\nvar HEIGHT = 800;\nlet c_radian = 0;\nlet r_radian = 0;\nlet lightOn;\nlet lightOff;\nvar hsGeoGroupOn = new THREE.Group();\nvar hsGeoGroupOff = new THREE.Group();\nvar globalHsGroupOff = new THREE.Group();\n\nvar model_hs;\nvar model_pn;\nvar mesh;\nvar controls;\nvar plane = {};\n\nvar vp = {}; //グローバルなフェイズ管理\n\n\n// 開発用\nvp.v_phase = \"5_teach_how_to\";\n\n\nconst colorConf = {\n\t'red': '#ff0000', 'yellow': '#f0f000', 'green': '#00e000', 'skyblue': '#00ffff',\n\t'blue': '#0000ff', 'black': '#000000', 'dark' : '#335500', 'white': '#ffffff', 'pink' : '#ff99ff'\n};\n\n// レンダラー\nlet renderer = new THREE.WebGLRenderer({\n  preserveDrawingBuffer:true\n});\n// renderer.autoClearColor = false;\nrenderer.setSize( WIDTH, HEIGHT );\n// renderer.setClearColor(0xffffff);\n\n\n// canvasを配置\ndocument.getElementById('stage').appendChild(renderer.domElement)\n\n// メイン描画用のシーンとカメラ\nvar sceneOn = new THREE.Scene();\nvar sceneOff = new THREE.Scene();\nvar camera = new THREE.PerspectiveCamera( 70, WIDTH / HEIGHT, 1, 100 );\n//light\nlightOn = new THREE.DirectionalLight(0xffffff, 1);\nlightOff = new THREE.DirectionalLight(0xffffff, 1);\nlightOn.position.set(0, 200, 80);\nlightOff.position.set(0, 200, 80);\nsceneOn.add(lightOn);\nsceneOff.add(lightOff);\n//背景の定義\nvar scene_bg = new THREE.Scene();\nvar camera_bg = new THREE.OrthographicCamera(0, WIDTH, HEIGHT, 0, 0, 1000);\n// メイン描画オブジェクト\n\n//JSONをロード\nlet loader = new THREE.JSONLoader();　　\nlet modelPath = '../src/data/hs300k.json'\n// modelPath = \"https://s3-us-west-2.amazonaws.com/s.cdpn.io/1538236/hs300k.json\";\n\n////////////\n//初期カラー\n//////////\nvar termsTree1 = {\n\tterm1 : {\n\t\tledNo : 1,\n\t\toftenBunbo : 2,\n\t\toftenBunshi: 1,\n\t\tledColor : 'blue'\n\t},\n\tterm2 : {\n\t\tledNo : 2,\n\t\toftenBunbo : 3,\n\t\toftenBunshi : 1,\n\t\tledColor : 'red'\n\t},\n\tterm3 : {\n\t\tledNo : 3,\n\t\toftenBunbo : 2,\n\t\toftenBunshi: 1,\n\t\tledColor : 'red'\n\t},\n\tterm4 : {\n\t\tledNo : 4,\n\t\toftenBunbo : 1,\n\t\toftenBunshi: 1,\n\t\tledColor : 'green'\n\t},\n\tterm5 : {\n\t\tledNo : 5,\n\t\toftenBunbo : 5,\n\t\toftenBunshi: 3,\n\t\tledColor : 'green'\n\t}\n}\n\nvar termsTree2 = {\n\tterm1 : {\n\t\tledNo : 1,\n\t\toftenBunbo : 1,\n\t\toftenBunshi: 1,\n\t\tledColor : 'blue'\n\t},\n\tterm2 : {\n\t\tledNo : 2,\n\t\toftenBunbo : 1,\n\t\toftenBunshi : 1,\n\t\tledColor : 'red'\n\t},\n\tterm3 : {\n\t\tledNo : 3,\n\t\toftenBunbo : 2,\n\t\toftenBunshi: 1,\n\t\tledColor : 'red'\n\t},\n\tterm4 : {\n\t\tledNo : 4,\n\t\toftenBunbo : 3,\n\t\toftenBunshi: 1,\n\t\tledColor : 'green'\n\t},\n\tterm5 : {\n\t\tledNo : 5,\n\t\toftenBunbo : 5,\n\t\toftenBunshi: 2,\n\t\tledColor : 'green'\n\t}\n}\n\nvar termsTree3 = {\n\tterm1 : {\n\t\tledNo : 1,\n\t\toftenBunbo : 2,\n\t\toftenBunshi: 1,\n\t\tledColor : 'blue'\n\t},\n\tterm2 : {\n\t\tledNo : 2,\n\t\toftenBunbo : 1,\n\t\toftenBunshi : 1,\n\t\tledColor : 'red'\n\t},\n\tterm3 : {\n\t\tledNo : 3,\n\t\toftenBunbo : 2,\n\t\toftenBunshi: 1,\n\t\tledColor : 'red'\n\t},\n\tterm4 : {\n\t\tledNo : 4,\n\t\toftenBunbo : 3,\n\t\toftenBunshi: 1,\n\t\tledColor : 'green'\n\t},\n\tterm5 : {\n\t\tledNo : 5,\n\t\toftenBunbo : 2,\n\t\toftenBunshi: 1,\n\t\tledColor : 'green'\n\t}\n}\n\nfunction initRender () {\n\tloader.load(modelPath, (geo, mat) => {\n\t\tlet hsGroupOn = new THREE.Group();\n\t\tlet hsGroupOff = new THREE.Group();\n\n\t\tfor (let hs_num=0 ; hs_num<9 ;hs_num++ ) {\n\n\t\t\tlet geometry = geo;\n\t\t\tlet material = mat;\n\t\t\tlet scale_hs = 1;\n\t\t  //let BasicMat = new THREE.MeshBasicMaterial(mat);\n\t\t  let BasicMat = new THREE.MeshBasicMaterial(mat);\n\t\t  let PhongMat = new THREE.MeshPhongMaterial(mat);\n\t\t  BasicMat.color = new THREE.Color(\"#ffffff\");\n\t\t  BasicMat.wireframe = true;\n\n\t\t  model_hs = new THREE.Mesh(geo, BasicMat);\n\t\t  model_pn = new THREE.Mesh(geo, PhongMat);\n\n\t\t\tmodel_hs.scale.set(scale_hs, scale_hs, scale_hs);\n\t\t\tmodel_pn.scale.set(scale_hs*1.05, scale_hs*1.05, scale_hs*1.05);\n\t\t\tlet randColor = Math.random() * 0xffffff\n \t\t\tmodel_pn.material.color = new THREE.Color(randColor);\n\n\t\t\tmodel_hs.material.opacity =0.13;\n\t\t\tmodel_hs.material.transparent = true;\n\n\t\t\tlet p_geometry = new THREE.PlaneGeometry( 0.2, 0.17);\n\t\t\t// let p_geometry = new THREE.CircleGeometry( 0.13);\n\t\t\t// let p_geometry = new THREE.SphereGeometry(0.1,16,16, 0, Math.PI*2, 0, Math.PI/2);\n\t\t\t// p_geometry.rotation.y = (Math.PI) / 4  ;\n\n\t\t\t///////\n\t\t\t// 場所をずらす\n\t\t\tmodel_pn.position.y = hs_num * 3;\n\t\t\t// model_pn.position.x = hs_num * 1.6;\n\t\t\tmodel_hs.position.y = hs_num * 3;\n\t\t\t// model_hs.position.x = hs_num * 1.6;\n\n\n\t\t\t// ハンドスピナーとLEDライト５個をグループに\n\t\t\t// let hsGeoGruoup = new THREE.Group();\n\n\t\t\t\t// renderer.preserveDrawingBuffer = \"true\";\n\t\t\t\t// renderer.autoClearColor = \"false\";\n\t\t\thsGroupOn.add(model_pn);\n\t\t\tglobalHsGroupOff.add(model_hs);\n\t\t\thsGeoGroupOn.add(hsGroupOn);\n\t\t\thsGeoGroupOff.add(globalHsGroupOff);\n\n\t\t\tlet randColorConf = {}\n\t\t\tfor (let ledNo = 1; ledNo <= 5; ledNo++  ) {\n\t\t\t\trandColorConf[ledNo] = Math.random() * 0xffffff;\n\t\t\t}\n\n\n\t\t\tfor (let shamFrame=1 ; shamFrame <=60 ; shamFrame++) {\n\n\t\t\t\tlet planeGroup = new THREE.Group()\n\t\t\t\tfor (let keyNo=1;keyNo <= 5; keyNo++) {\n\t\t\t\t\tlet termsTree;\n\t\t\t\t\tif (hs_num%3 === 1) {\n\t\t\t\t\t\ttermsTree = termsTree1;\n\t\t\t\t\t} else if (hs_num%3 === 2) {\n\t\t\t\t\t\ttermsTree = termsTree2;\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttermsTree = termsTree3;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet tmpTerm = termsTree['term'+keyNo];\n\n\t\t\t\t\t// let p_material = new THREE.MeshBasicMaterial( { side: THREE.DoubleSide} );\n\t\t\t\t\tlet p_material = new THREE.MeshPhongMaterial( );\n\t\t\t\t\tplane[keyNo] = new THREE.Mesh( p_geometry, p_material );\n\t\t\t\t  plane[keyNo].rotation.x = -(Math.PI) / 2  ;\n\n\t\t\t\t\t//平面の位置を少しずつずらす。\n\t\t\t\t\tplane[keyNo].position.z =0.27*keyNo + 1.2;\n\t\t\t\t\t//画面に対する奥行き方向は変更なしで2\n\t\t\t\t\tplane[keyNo].position.y =0.39;\n\n\t\t\t\t\tplane[keyNo].material.color = new THREE.Color(colorConf['dark']);\n\t\t\t\t\tplane[keyNo].visible = 1;\n\n\t\t\t\t\tlet tmp_colored_led = {};\n\t\t\t\t\tif (shamFrame % tmpTerm['oftenBunbo'] < tmpTerm['oftenBunshi']) {\n\t\t\t\t\t\tplane[tmpTerm['ledNo']].material.color\n\t\t\t\t\t\t\t= new THREE.Color(randColorConf[tmpTerm['ledNo']]);\n\t\t\t\t\t\t// tmp_colored_led[tmpTerm['ledNo']] = 1;\n\t\t\t\t\t// } else if (tmp_colored_led[tmpTerm['ledNo']] !== 1) {\n\t\t\t\t\t} else {\n\t\t\t\t\t\tplane[tmpTerm['ledNo']].material.color\n\t\t\t\t\t\t\t= new THREE.Color(colorConf['black']);\n\t\t\t\t\t}\n\t\t\t\t  // 先ほどのboxをグループに追加\n\t\t\t\t\tplane[keyNo].position.y = hs_num * 6;\n\t\t\t\t\t// plane[keyNo].position.x = hs_num * 1.6;\n\n\t\t\t\t\t// plane[keyNo].rotation.y = (2*Math.PI /60) * shamFrame;\n\t\t\t\t  planeGroup.add(plane[keyNo]);\n\t\t\t\t\t//hsGeoGruoup.add(model_pn);\n\n\t\t\t\t}\n\t\t\t\tplaneGroup.rotation.y = (2*Math.PI /60) * shamFrame;\n\t\t\t\thsGeoGroupOff.add( planeGroup);\n\t\t\t}\n\n\n\t\t}\n\t\t//cameraの位置を設定\n\t\tcamera.position.set(0, 50, 20);\n\t\tcamera.lookAt({x:0, y:0, z:0 });\n\n\n\t\tsceneOn.add(hsGeoGroupOn);\n\t\tsceneOff.add(hsGeoGroupOff);\n\n\t\tcontrols = new THREE.OrbitControls(camera, renderer.domElement);\n\t  main();\n\t});\n}\n\n\nlet count = 0;\nlet render_count = 0;\nlet count_three = 0;\n\nfunction main() {\n\n\t// OrbitControls対応箇所\n\t controls.update()\n\t// if (vp.v_phase === \"1_lets_spin\" || vp.v_phase === \"0_start_anime\" ) {\n\t//\n\t// } else if (vp.v_phase === \"2_more_spin\") {\n\t// \thsGeoGroup.rotation.y += (2*Math.PI /60);\n\t// } else if ( vp.v_phase === \"3_led_explain\") {\n\t// \thsGeoGroup.rotation.y += (2*Math.PI /60)*7 ;\n\t// } else if (vp.v_phase === \"4_led_light_on\"){\n\t// \tif (model_pn.visible ) {\n\t// \t\tmodel_pn.visible = 0;\n\t// \t\trender_count = 40;\n\t// \t} else {\n\t// \t\trenderer.autoClearColor = false;\n\t// \t\tfor (let ledNo = 1 ; ledNo<=5; ledNo++) {\n\t// \t\t\tif (ledNo %3 ===1) { plane[ledNo].material.color = new THREE.Color(colorConf[\"red\"]);}\n\t// \t\t\tif (ledNo %3 ===2) { plane[ledNo].material.color = new THREE.Color(colorConf[\"blue\"]);}\n\t// \t\t\tif (ledNo %3 ===0) { plane[ledNo].material.color = new THREE.Color(colorConf[\"yellow\"]);}\n\t// \t\t\tplane[ledNo].visible = 1;\n\t// \t\t}\n\t// \t\trender_count = \"step4_done\";\n\t// \t}\n\t//\n\t// \t// hsGeoGruoup.rotation.y += (2*Math.PI /60)*41 ;\n\t// } else {\n\t\t// 追記\n\t\t// model_pn.visible = 0;\n\trenderer.autoClearColor = true;\n\thsGeoGroupOn.rotation.y += (2*Math.PI /60)*9.4 ;\n\tglobalHsGroupOff.rotation.y += (2*Math.PI /60)*5 ;\n\n\thsGeoGroupOff.position.y = Math.sin(count/90)*10;\n\thsGeoGroupOff.position.x = 3;\n\n\thsGeoGroupOn.position.y = Math.sin(count/90)*10;\n\thsGeoGroupOn.position.x = 3;\n\t\t// for (let ledNo = 1 ; ledNo<=5; ledNo++) {\n\t\t// \tif (ledNo %3 ===1) { plane[ledNo].material.color = new THREE.Color(colorConf[\"red\"]);}\n\t\t// \tif (ledNo %3 ===2) { plane[ledNo].material.color = new THREE.Color(colorConf[\"blue\"]);}\n\t\t// \tif (ledNo %3 ===0) { plane[ledNo].material.color = new THREE.Color(colorConf[\"yellow\"]);}\n\t\t// \tplane[ledNo].visible = 1;\n\t\t// }\n\n\n\t\t// if (render_count === \"step4_done\") {\n\t\t// \trender_count = Number(30);\n\t\t// \tinitFormDefault();\n\t\t// }\n\t\t// //LED複数の条件を可能にするため、今回の描画で処理されたLEDを記録する。\n\t\t// let tmp_colored_led = {};\n\t\t//\n\t\t// for (let key in termsTree ) {\n\t\t// \tlet tmpTerm = termsTree[key];\n\t\t// \t// console.log(key);\n\t\t// \t// メインの描画決定処理\n\t\t// \tif (count % tmpTerm['oftenBunbo'] < tmpTerm['oftenBunshi']) {\n\t\t// \t\tplane[tmpTerm['ledNo']].material.color\n\t\t// \t\t\t= new THREE.Color(tmpTerm['ledColor']);\n\t\t// \t\ttmp_colored_led[tmpTerm['ledNo']] = 1;\n\t\t// \t} else if (tmp_colored_led[tmpTerm['ledNo']] !== 1) {\n\t\t// \t\tplane[tmpTerm['ledNo']].material.color\n\t\t// \t\t\t= new THREE.Color(colorConf['black']);\n\t\t// \t}\n\t\t//\n\t\t//\n\t\t//\n\t\t// }\n\t\t// hsGeoGroup.rotation.y += (2*Math.PI/60)*41 ;\n\n\t// }\n\n\t// LEDの色の表示\n\n\tcount ++;\n\n\t// 開発切り替え\n  renderer.render( sceneOn, camera );\n  // renderer.render( sceneOff, camera );\n\n\t// 初期表示\n\trequestAnimationFrame(main);\n\t// if (render_count < 60) {\n\t// \trender_count++;\n\t// \tmain();\n\t// } else {\n\t//\n\t// \tcount_three ++ ;\n\t// \tif (count_three === 2) {\n\t// \t\trequestAnimationFrame(main);\n\t// \t\tcount_three = 0;\n\t// \t} else {\n\t// \t\tmain();\n\t// \t}\n\t//\n\t// }\n\n}\n\n\n\n////////////////////////\n//条件を反映ボタンを押すとき\n////////////////////////\n\n\n\n/////////////////////\n//スクロールアクション//\n////////////////////\n// function countScroll () {\n// \t// スクロールしたら発動\n// \t$window.scroll(function() {\n// \t\tlet before_scroll_px = scroll_px;\n// \t\t// スクロール量を変数に格納\n// \t\tscroll_px = $(this).scrollTop();\n// \t\tdelta_scroll_px = (scroll_px) - (before_scroll_px);\n// \t\tsum_delta_scroll_px +=delta_scroll_px;\n//\n// \t\t//specialsをとめる\n// \t\tif ( delta_scroll_px < 0 ) {\n// \t\t\t$(\"#clover_main\").css(\"animation-duration\", \"0s\");\n// \t\t\t$(\"#husha_main\").css(\"animation-duration\", \"0s\");\n// \t\t\t$(\"#kanransha_main\").css(\"animation-duration\", \"0s\");\n//\n// \t\t}\n//\n// \t});\n// }\n////////////////\n//ホバー時の挙動//\n///////////////\n// function addHoverImgChange () {\n// \t$( '.item_box' ).hover((e)=>{\n//\n// \t\t\t$(e.currentTarget).find(\"img\").each((i, ev)=>{\n// \t\t\t\tif ($(ev).attr(\"class\") == \"not_spin\"  ){\n// \t\t\t\t\t$(ev).animate({opacity: 0});//\n// \t\t\t\t} else {\n// \t\t\t\t\t$(ev).animate({opacity: 1});\n// \t\t\t\t}\n// \t\t\t});\n//\n// \t},(e)=>{\n//\n// \t\t$(e.currentTarget).find(\"img\").each((i, ev)=>{\n// \t\t\tif ($(ev).attr(\"class\") == \"not_spin\"  ){\n// \t\t\t\t$(ev).animate({opacity:1});\n// \t\t\t} else {\n// \t\t\t\t$(ev).animate({opacity:0});\n// \t\t\t}\n// \t\t});\n// \t});\n// }\n\n////////////////////\n// VueによるHTML処理\n//////////////////\n\nfunction initVueTerm () {\n\n\tVue.component('termComponent', {\n\t\ttemplate: '#term-component',\n\t\tprops: [\"index\", \"term_id\",\"term\"],\n\t\tmethods: {\n\t\t\tdeleteTerm: function() {\n\t\t\t\tconsole.log(this.index);\n\t\t\t\tthis.$emit('delete-term',(this.index));//なぜかindexがうまく取れない\n\t\t\t}\n\t\t}\n\t\t// },\n\t\t// mounted: function () {\n\t\t// \t// console.log(this.$ref.foo);\n\t\t// }\n\t});\n\n\tlet count = 5;//本当は、初期値は下のtermsの数にした方が良い\n\tvar vm = new Vue({\n\t\tel: '#app',\n\t\tdata: {\n\t\t\tterms:[\n\t\t\t\t{id:1, content:\"term1\"},\n\t\t\t\t{id:2, content:\"term2\"},\n\t\t\t\t{id:3, content:\"term3\"},\n\t\t\t\t{id:4, content:\"term4\"},\n\t\t\t\t{id:5, content:\"term5\"}\n\t\t \t]\n\t \t},\n\n\t\tmethods: {\n\t\t\taddTerm: function() {\n\t\t\t\tcount++;\n\t\t\t\tlet term_id= \"term\"+count;\n\t\t\t\tthis.terms.push(\n\t\t\t\t\t{id:count, content:term_id}\n\t\t\t\t);\n\t\t\t},\n\t\t\t// deleteTermEmit: function(index) {\n\t\t\tdeleteTermEmit: function(index) {\n\t\t\t\t// if(confirm(\"この条件をほんとうに消しますか\")) {\n\t\t\t\t\tthis.terms.splice(index,1)\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\t});\n}\n\nfunction initVuePhase() {\n\t//vpはグローバル変数\n\tvp = new Vue({\n\t\tel: '.vue_phase',\n\t\tdata: {\n\t\t\tv_phase : \"0_start_anime\"\n\t\t\t//フェイズは以下がある。\n\t\t\t//(0) : 0_start_anime\n\t\t\t//(1) : 1_lets_spin\n\t\t\t//(2) : 2_more_spin\n\t\t\t//(3) : 3_led_explain\n\t\t\t//(4) : 4_led_light_on\n\n\t\t\t//(5) : 5_teach_how_to\n\t\t},\n\t\tmethods: {\n\t\t\tchangePhase (nextPhase) {\n\t\t\t\tvp.v_phase = nextPhase;\n\t\t\t\tconsole.log(\"phase\"+nextPhase);\n\t\t\t}\n\t\t}\n\t});\n\t// vp.v_phase = \"2_more_spin\";\n}\n\nfunction initAnimation() {\n\n\tlet el = document.getElementById(\"spinyart_img\");\n\tel.className += \" getin_spin\";\n\tsetTimeout( ()=>{\n\t\tel.className += \" getin_spin\";\n\t\tvp.v_phase = \"1_lets_spin\";\n\t\t// animateInWindow();\n\t},4500);\n\n\n}\n\nfunction initColorPicker() {\n\tfor (let picker_cnt=1; picker_cnt <= 5; picker_cnt++ ) {\n\t\tmakeColorPicker(picker_cnt);\n\t}\n}\n\nfunction makeColorPicker(num) {\n\tlet picker_id = \"picker\"+ num;\n\t$('#' + picker_id ).spectrum({\n\t\tcolor: \"#ffffff\",\n\t\tshowPaletteOnly: true,\n\t\tpalette: [\n\t\t\t[\"#ffffff\",  \"#000000\",\"#f44336\", \"#ff9800\", \"#ffeb3b\", \"#8bc34a\", \"#4caf50\", \"#03a9f4\", \"#2196f3\"]\n\t\t]\n\t});\n\t// $('#' + picker_id ).spectrum({\n\t// \treplacerClassName: 'picker_style'\n\t// });\n}\n\n\n$(document).ready(function() {\n\t// $(window).fadeThis({speed: 600, distance: 4});\n\t// $(countScroll());\n\t// $(addHoverImgChange());\n\t// initVueTerm();\n\t// initColorPicker();\n\t// initVuePhase();\n\t// initFormDefault();\n\t// initExecBtn();\n\t// initAnimation();\n\t$(initRender());\n\n});\n"]}